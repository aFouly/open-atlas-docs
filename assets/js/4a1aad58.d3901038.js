"use strict";(self.webpackChunkopen_atlas=self.webpackChunkopen_atlas||[]).push([[148],{1528:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var s=t(4848),o=t(8453);const i={sidebar_position:4},r="Risk Assessment Tutorial",a={id:"risk-assessment-tutorial",title:"Risk Assessment Tutorial",description:"Read this tutorial if you are looking for a step-by-step guide on how to create a plot, run an EUDR risk assessment analysis and retrieve information about its results.",source:"@site/docs/risk-assessment-tutorial.md",sourceDirName:".",slug:"/risk-assessment-tutorial",permalink:"/open-atlas-docs/docs/risk-assessment-tutorial",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Risk Assessment",permalink:"/open-atlas-docs/docs/risk-assessment"}},l={},d=[];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"risk-assessment-tutorial",children:"Risk Assessment Tutorial"})}),"\n",(0,s.jsx)(n.p,{children:"Read this tutorial if you are looking for a step-by-step guide on how to create a plot, run an EUDR risk assessment analysis and retrieve information about its results."}),"\n",(0,s.jsx)(n.p,{children:"In this guide, you will learn how to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Authenticate to Open Atlas Vantage product"}),"\n",(0,s.jsx)(n.li,{children:"Retrieve information about analytics tokens"}),"\n",(0,s.jsx)(n.li,{children:"Register a plot"}),"\n",(0,s.jsx)(n.li,{children:"Create an analysis job"}),"\n",(0,s.jsx)(n.li,{children:"Retrieve and interpret analysis results"}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"authentication",children:(0,s.jsx)(n.strong,{children:"Authentication"})}),"\n",(0,s.jsxs)(n.p,{children:["Vantage API supports basic authentication that requires ",(0,s.jsx)(n.code,{children:"user"})," and ",(0,s.jsx)(n.code,{children:"password"})," you\u2019ll receive during the onboarding session."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl --location -X POST 'https://vantage.open-atlas.com/login' \\\n--user 'user:password'\n"})}),"\n",(0,s.jsx)(n.p,{children:"The endpoint returns the JWT that is valid for 60 minutes. We recommend storing it in the local environment for security and reusability reasons."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'export YOUR_BEARER_TOKEN="xxx\u2026xxx"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Now, with the token, you can access all other endpoints. You need to specify it in the ",(0,s.jsx)(n.code,{children:"Authorization"})," header. The following example returns information about analysis tokens that can be used to run EUDR risk assessment analysis."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl -X GET 'https://vantage.open-atlas.com/users/check_tokens' \\\n  -H \"Authorization: Bearer $YOUR_BEARER_TOKEN\"\n"})}),"\n",(0,s.jsx)(n.p,{children:"The information has three main fields:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u201cToken balance\u201d defines the total number of tokens that have been allocated to your account."}),"\n",(0,s.jsxs)(n.li,{children:["\u201cReserved Tokens\u201d are the total number of tokens that have been used to run risk assessment. Please note that if a job is incomplete, any tokens reserved for plots that did not complete the analysis will be reimbursed. More information is on the ",(0,s.jsx)(n.a,{href:"/open-atlas-docs/docs/risk-assessment",children:"\u201cRisk assessment page\u201d"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"\u201cFree Tokens\u201d are tokens that are available to run risk assessment."}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"registering-plots",children:(0,s.jsx)(n.strong,{children:"Registering Plots"})}),"\n",(0,s.jsxs)(n.p,{children:["The next stage is to register geolocations of plots. Later, you can use them to run a risk assessment analysis. As per ",(0,s.jsx)(n.a,{href:"https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX%3A32023R1115#d1e933-206-1",children:"EUDR requirements"}),", plots could be represented as points or polygons for areas that are smaller than four hectares and must be polygons for larger areas. The ",(0,s.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc7946#section-3.1",children:"GeoJSON geometry object"})," specification is used for defining the geometry."]}),"\n",(0,s.jsxs)(n.p,{children:["Each plot must have information about the commodity and the production time. More information about Plots is available on the ",(0,s.jsx)(n.a,{href:"/open-atlas-docs/docs/plot-of-land",children:"\u201cPlot of Land\u201d page"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"POST /plots/make_plot"})," endpoint allows registering both point and polygon geometry types. The following is an example of registering the point geometry:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'curl -X POST \'https://vantage.open-atlas.com/plots/make_plot\' \\\n-H "Authorization: Bearer YOUR_BEARER_TOKEN" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "geojson": {\n    "type": "FeatureCollection",\n    "features": [\n      {\n        "type": "Feature",\n        "properties": {},\n        "geometry": {\n          "type": "Point",\n          "coordinates": [107.880247, 14.093255]\n        }\n      }\n    ]\n  },\n  "plot_name": "Name of the Plot",\n  "commodity": "cocoa",\n  "harvest_date": "2022-04-01",\n  "notes": "Optional notes to add",\n  "additional_info": {\n    "phone": "Phone Number",\n    "owner": "Company Name"\n  }\n}\'\n'})}),"\n",(0,s.jsx)(n.p,{children:"To register the polygon geometry, the request body is the same, except for the geometry definition. Here is an example of the polygon geometry:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{\n  "coordinates": [\n    [\n      [\n        19.964949370979213,\n        0.3453748381975714\n      ],\n      [\n        19.895702998305723,\n        0.3624724076695145\n      ],\n      [\n        19.827326919249742,\n        0.31884518162797804\n      ],\n      [\n        19.86923359715044,\n        0.2136700976160455\n      ],\n      [\n        20.135891341530566,\n        0.2008452821354325\n      ],\n      [\n        19.964949370979213,\n        0.3453748381975714\n      ]\n    ]\n  ],\n  "type": "Polygon"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Once run, the endpoint returns the information with the registered plot with a few extra fields:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"username"})," - the username who created the plot."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"country"})," - the country where the plot is located."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"state"})," - the state, within the country, where the plot is located."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"analysis"})," - the analysis information about the plot. At this stage, this is empty and will be filled once the analysis is run."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"plot_id"})," - the unique identifier of the plot. You will need this ID to create an analysis job in the next stage."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lat"})," - the latitude of the center of the plot. For point geometry, it is the same as the latitude that was provided."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lon"})," - the longitude of the center of the plot. For point geometry, it is the same as the longitude that was provided."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"area_ha"})," - the area of the plot in hectares."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tokens_cost"})," - the estimated number of analysis tokens to run the risk assessment analysis. Please note, that tokens are not yet reserved."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"created_at"})," - information about when the plot was created."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"updated_at"})," - information about when the plot was updated the last time."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"company_id"})," - the unique identifier of the company."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"analysis_image"})," - the link to the analysis image. Will be empty at this stage, but filled once the analysis is run."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Information",type:"tip",children:(0,s.jsx)(n.p,{children:"Please note, that while creating a plot for the point target, the endpoint returns the polygon geometry. The system creates a buffer around  the provided point geometry to make a plot with a size of 4 hectares."})}),"\n",(0,s.jsx)(n.h1,{id:"risk-assessment",children:(0,s.jsx)(n.strong,{children:"Risk Assessment"})}),"\n",(0,s.jsx)(n.p,{children:"Now, with having a plot registered, you can run the EUDR risk assessment. You can do that by creating a job. The process of running risk assessment is asynchronous, so you need to create a job first and then retrieve results."}),"\n",(0,s.jsxs)(n.p,{children:["To create a job, you need to use the ",(0,s.jsx)(n.code,{children:"POST /jobs/make_job"})," endpoint."]}),"\n",(0,s.jsx)(n.p,{children:"Please note, that at this stage, your tokens will be reserved."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'curl -X POST \'https://vantage.open-atlas.com/jobs/make_job\' \\\n-H "Authorization: Bearer YOUR_BEARER_TOKEN" \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "plot_ids": [\n    "ab5c45e9-2e18-416b-adb0-9c6cb1536594",\n    "de57aef7-99e5-4ec3-b2f2-8aba6f5f6261"\n  ],\n  "job_name": "Name of your analysis job",\n  "notes": "Optional notes to add",\n  "additional_info": {\n    "phone": "Phone Number",\n    "address": "Address"\n  }\n}\'\n\n'})}),"\n",(0,s.jsx)(n.p,{children:"Plot IDs field represents a set of plots you want to run an assessment for. You can provide up to 10000 plots in a single job."}),"\n",(0,s.jsxs)(n.p,{children:["Once run, the endpoint returns the information with the created job that has a few extra fields that are described on the ",(0,s.jsx)(n.a,{href:"/open-atlas-docs/docs/risk-assessment",children:"\u201cRisk assessment page\u201d"}),". In order to retrieve results of the job, you must retrieve the ",(0,s.jsx)(n.code,{children:"job_id"})," value - the unique identifier of the job."]}),"\n",(0,s.jsx)(n.h1,{id:"retrieving-risk-assessment-results",children:(0,s.jsx)(n.strong,{children:"Retrieving Risk Assessment Results"})}),"\n",(0,s.jsx)(n.p,{children:"In general, there are two ways of retrieving results: by analysis job or by plot. In both cases, we provide information visual information and the calculated risk assessment."}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"GET /jobs/retrieve_job/{{job_id}}"})," endpoint returns information about the job using the ",(0,s.jsx)(n.code,{children:"job_id"}),". The information is provided under the ",(0,s.jsx)(n.code,{children:"plots"})," list. In addition, there is a link to the visual representation of the analysis. It is available under each plot in ",(0,s.jsx)(n.code,{children:"analysis_image"})," or in the ",(0,s.jsx)(n.code,{children:"job_visualization_url"}),". Please check the ",(0,s.jsx)(n.a,{href:"/open-atlas-docs/docs/risk-assessment",children:"\u201cRisk assessment page\u201d"})," for more information."]}),"\n",(0,s.jsxs)(n.p,{children:["You can also retrieve analysis information for each specific plot using the ",(0,s.jsx)(n.code,{children:"GET /plots/get_plot/{{plot_id}}"})," endpoint."]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(6540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);